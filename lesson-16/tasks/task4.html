<!DOCTYPE html>
<html lang="en">

   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="shortcut icon" href="../../img/icons/favicon.png" type="image/x-icon">
      <title>–†—ñ—à–µ–Ω–Ω—è –∑–∞–¥–∞—á—ñ ‚Ññ4</title>
   </head>

   <body>
      <h1>–†—ñ—à–µ–Ω–Ω—è –∑–∞–¥–∞—á—ñ ‚Ññ4</h1>
      <p>–°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–ª–∞—Å TBankomat, —è–∫–∏–π –º–æ–¥–µ–ª—é—î —Ä–æ–±–æ—Ç—É –±–∞–Ω–∫–æ–º–∞—Ç–∞. –ö–ª–∞—Å –ø–æ–≤–∏–Ω–µ–Ω –º—ñ—Å—Ç–∏—Ç–∏ –ø–æ–ª—è –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ
         –∫—É–ø—é—Ä –∫–æ–∂–Ω–æ–≥–æ —ñ–∑ –Ω–æ–º—ñ–Ω–∞–ª—ñ–≤ –≤—ñ–¥ 5 –¥–æ 200 –≥—Ä–∏–≤–µ–Ω—å. –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –º–µ—Ç–æ–¥–∏ –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó —Ç–∞ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ—ó
         —Å—É–º, —è–∫—ñ –º–æ–∂–µ –≤–∏–¥–∞—Ç–∏ –±–∞–Ω–∫–æ–º–∞—Ç, —Ç–∞ –º–µ—Ç–æ–¥ –∑–Ω—è—Ç—Ç—è –¥–µ—è–∫–æ—ó —Å—É–º–∏.</p>
      <p>–†—ñ—à–µ–Ω–Ω—è:</p>
      <script>
         "use strict"
         // ===== BEGIN ===== //
         class Note {
            constructor(noteValue, noteNumber) {
               this.value = noteValue
               this.number = noteNumber
            }
            get totalValue() {
               return this.value * this.number
            }
            toString() {
               return `${this.value} : ${this.number}`
            }
         }


         class TBankomat {
            constructor(notesList) {
               this.notesList = notesList
            }
            getMinSum() {
               let minNote = this.notesList.reduce((prevNoteValue, note) => (
                  note.number > 0 && note.value < prevNoteValue ? note.value : prevNoteValue), Infinity)
               return isFinite(minNote) ? minNote : 0
            }
            getMaxSum() {
               let sum = this.notesList.reduce(
                  (prevSum, note) => prevSum + note.totalValue, 0
               )
               return sum
            }
            getPossibleNotesList(userMoney) {
               const possibleNotes = []
               for (let i = 0; i < this.notesList.length && userMoney > 0; i++) {
                  const note = this.notesList[i]
                  if (userMoney >= note.value && note.number > 0) {
                     const notesNum = Math.floor(userMoney / note.value)
                     const notesToGive = Math.min(notesNum, note.number)
                     possibleNotes.push({
                        note,
                        notesToGive
                     })
                     userMoney -= notesToGive * note.value
                  }
               }
               if (userMoney > 0) return false
               return possibleNotes
            }
            getMoney(userMoney) {
               const possibleNotes = this.getPossibleNotesList(userMoney)
               if (possibleNotes) {
                  document.write('–í–∏–¥–∞—é –∫—É–ø—é—Ä–∏:<br>')
                  for (const { note, notesToGive } of possibleNotes) {
                     document.write(`${note.value} –≥—Ä–Ω : ${notesToGive}<br>`)
                     note.number -= notesToGive
                  }
                  document.write('–ó–∞–±–µ—Ä—ñ—Ç—å –≥—Ä–æ—à—ñ!')
               } else document.write('–ù–µ–º–æ–∂–ª–∏–≤–æ –≤–∏–¥–∞—Ç–∏ —Ç–∞–∫—É —Å—É–º—É!')
            }
         }


         let notesList = [
            new Note(1000, 1),
            new Note(500, 3),
            new Note(200, 5),
            new Note(100, 10),
            new Note(50, 20),
            new Note(20, 0),
            new Note(10, 0),
            new Note(5, 0),
            new Note(2, 0),
            new Note(1, 0)
         ]



         const bankomat = new TBankomat(notesList)
         const getMinSum = bankomat.getMinSum()
         const getMaxSum = bankomat.getMaxSum()
         const getMoney = parseInt(prompt('–í–≤–µ–¥—ñ—Ç—å —Å—É–º—É –¥–ª—è –∑–Ω—è—Ç—Ç—è –≥–æ—Ç—ñ–≤–∫–∏'))


         document.write(`–î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –∑–Ω—è—Ç—Ç—è: ${getMaxSum} –≥—Ä–Ω<br>`)
         document.write(`–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ —Å—É–º–∞ –¥–Ω—è—Ç—Ç—è –≥–æ—Ç—ñ–≤–∫–∏: ${getMinSum} –≥—Ä–Ω<br>`)
         document.write(`–ó–∞–ø–∏—Ç –Ω–∞ –∑–Ω—è—Ç—Ç—è —Å—É–º–∏: ${getMoney} –≥—Ä–Ω<br>`)

         bankomat.getMoney(getMoney)
      </script>
      <a href="task4.html"> <br><br><br>–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏<br> </a>
      <a href="../index.html"> üëà –ù–∞–∑–∞–¥</a>
   </body>

</html>